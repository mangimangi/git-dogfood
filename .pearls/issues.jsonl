{"id":"gdf-94a1","title":"Convention-based dogfood resolve","status":"open","issue_type":"epic","priority":2,"created_at":"2026-02-10T04:22:37Z","body":"Replace dogfood: true flag with vendor key convention. See docs/planning/epics/resolve-by-convention.md"}
{"id":"gdf-94a1.1","title":"Replace dogfood flag lookup with vendor key convention in resolve script","status":"closed","issue_type":"task","priority":2,"created_at":"2026-02-10T04:22:46Z","parent":"gdf-94a1","body":"Change find_dogfood_vendor() to look for vendors[\"git-dogfood\"] key instead of scanning for dogfood: true. Define VENDOR_KEY constant. Update docstring.","references":[{"file":"dogfood/resolve","lines":["27-33"]}],"deps":[{"id":"gdf-94a1.3","type":"blocked_by"}],"estimates":[{"estimator":"claude-opus-4-6","implementer":"claude-opus-4-6","cost":{"input":5000,"output":1500}}],"started_at":"2026-02-10T04:48:54Z","commit":"d06530b","implementer":"claude-opus-4-6","cost":{"input":5000,"output":1500},"implemented_at":"2026-02-10T04:49:34Z","evaluation":{"evaluator":"claude-opus-4-6","evaluated_at":"2026-02-10T05:04:04Z","scores":{"correctness":95,"completeness":95,"quality":95,"testing":85,"documentation":88},"score":91.6},"closed_at":"2026-02-10T05:04:11Z"}
{"id":"gdf-94a1.2","title":"Remove dogfood: true from .vendored/config.json","status":"closed","issue_type":"task","priority":2,"created_at":"2026-02-10T04:22:50Z","parent":"gdf-94a1","body":"Remove the dogfood: true field from the git-dogfood vendor entry. No other fields change.","references":[{"file":".vendored/config.json","lines":["16"]}],"deps":[{"id":"gdf-94a1.3","type":"blocked_by"}],"estimates":[{"estimator":"claude-opus-4-6","implementer":"claude-opus-4-6","cost":{"input":3000,"output":800}}],"started_at":"2026-02-10T04:49:43Z","commit":"35fd201","implementer":"claude-opus-4-6","cost":{"input":3000,"output":800},"implemented_at":"2026-02-10T04:50:08Z","evaluation":{"evaluator":"claude-opus-4-6","evaluated_at":"2026-02-10T05:04:26Z","scores":{"correctness":100,"completeness":100,"quality":95,"testing":80,"documentation":85},"score":92.0},"closed_at":"2026-02-10T05:04:32Z"}
{"id":"gdf-94a1.3","title":"Update tests for convention-based resolve","status":"closed","issue_type":"task","priority":2,"created_at":"2026-02-10T04:22:53Z","parent":"gdf-94a1","body":"Rewrite test_resolve.py: assert on vendor key presence, not dogfood flag. Remove test_returns_none_when_dogfood_false and test_first_dogfood_wins. Add test for key found among other vendors.","references":[{"file":"tests/test_resolve.py"}],"deps":[{"id":"gdf-94a1.1","type":"blocks"},{"id":"gdf-94a1.2","type":"blocks"}],"estimates":[{"estimator":"claude-opus-4-6","implementer":"claude-opus-4-6","cost":{"input":8000,"output":3000}}],"started_at":"2026-02-10T04:47:48Z","commit":"69ce17e","implementer":"claude-opus-4-6","cost":{"input":12000,"output":3000},"implemented_at":"2026-02-10T04:48:43Z","evaluation":{"evaluator":"claude-opus-4-6","evaluated_at":"2026-02-10T05:03:44Z","scores":{"correctness":95,"completeness":92,"quality":90,"testing":92,"documentation":82},"score":90.2},"closed_at":"2026-02-10T05:03:51Z"}
{"id":"gdf-94a1.4","title":"Update workflow comments to reflect convention-based resolve","status":"closed","issue_type":"chore","priority":2,"created_at":"2026-02-10T04:22:58Z","parent":"gdf-94a1","body":"Update comments in dogfood.yml and templates/github/workflows/dogfood.yml to say 'looks for git-dogfood vendor key' instead of 'dogfood: true'.","references":[{"file":".github/workflows/dogfood.yml","lines":["5-6"]}],"estimates":[{"estimator":"claude-opus-4-6","implementer":"claude-opus-4-6","cost":{"input":4000,"output":1000}}],"started_at":"2026-02-10T04:50:17Z","commit":"84f7b9a","implementer":"claude-opus-4-6","cost":{"input":4000,"output":1000},"implemented_at":"2026-02-10T04:50:42Z","evaluation":{"evaluator":"claude-opus-4-6","evaluated_at":"2026-02-10T05:04:46Z","scores":{"correctness":95,"completeness":95,"quality":90,"testing":80,"documentation":95},"score":91.0},"closed_at":"2026-02-10T05:04:53Z"}
{"id":"gdf-94a1.5","title":"Add test coverage for install.sh and CI workflow to run tests on PR","status":"closed","issue_type":"task","priority":2,"created_at":"2026-02-10T04:29:05Z","parent":"gdf-94a1","body":"## Audit findings\n\n- dogfood/resolve: 11 tests (updated in gdf-94a1.3) \u2014 adequate\n- install.sh: 0 tests \u2014 the installation entry point is untested\n- No CI workflow runs pytest on PR \u2014 tests exist but never gate merges\n\n## Scope\n\n1. Add tests for install.sh covering:\n   - fetch_file() fallback from gh api to curl\n   - Directory creation (.dogfood, .github/workflows)\n   - Version file written correctly\n   - Workflow template installed on first run, skipped if exists\n   - .vendored/config.json registration (inline Python JSON update)\n   - Missing prerequisites (no .vendored/config.json)\n\n2. Add a pytest CI workflow (.github/workflows/test.yml):\n   - Trigger on pull_request\n   - Run pytest with python 3.x\n   - Gate PRs on test pass\n\n3. Add pyproject.toml with [tool.pytest.ini_options] (testpaths, etc.)\n\n## Notes\n\n- .vendored/check, .vendored/install, .pearls/prl.py are vendored from other repos \u2014 not in scope\n- install.sh tests will likely need bats or pytest with subprocess mocking\n- Consider shellcheck linting for install.sh in the same workflow","references":[{"file":"install.sh"},{"file":"tests/test_resolve.py"}],"estimates":[{"estimator":"claude-opus-4-6","implementer":"claude-opus-4-6","cost":{"input":25000,"output":8000}}],"started_at":"2026-02-10T04:50:52Z","commit":"1cf06ee","implementer":"claude-opus-4-6","cost":{"input":20000,"output":6000},"implemented_at":"2026-02-10T04:52:26Z","evaluation":{"evaluator":"claude-opus-4-6","evaluated_at":"2026-02-10T05:05:14Z","scores":{"correctness":90,"completeness":88,"quality":85,"testing":90,"documentation":82},"score":87.0},"closed_at":"2026-02-10T05:05:21Z"}
{"id":"gdf-94a1.6","title":"Add README.md documenting what git-dogfood is and how to use it","status":"closed","issue_type":"task","priority":2,"created_at":"2026-02-10T04:29:15Z","parent":"gdf-94a1","body":"## Audit findings\n\n- No README.md exists \u2014 the repo has zero user-facing documentation\n- .pearls/config.json references README.md but the file is missing\n- All documentation is scattered across script headers and workflow comments\n- An open-source tool needs a single entry point explaining itself\n\n## Scope\n\nREADME.md should cover:\n\n1. **What it is** \u2014 one-paragraph summary: git-dogfood automates self-updating\n   of vendored tools via GitHub Actions. When a tool releases a new version,\n   repos that vendor it automatically get a PR to update.\n\n2. **How it works** \u2014 the workflow chain:\n   code change \u2192 git-semver bump \u2192 Release \u2192 dogfood.yml \u2192 install-vendored \u2192\n   PR \u2192 auto-merge. Include a simple diagram.\n\n3. **Prerequisites** \u2014 what must be installed first:\n   - git-vendored (for .vendored/config.json and install-vendored.yml)\n   - git-semver (for version bumping and Release workflow)\n\n4. **Installation** \u2014 step by step:\n   - curl/bash install.sh command\n   - What files are created (.dogfood/resolve, .dogfood/.version, dogfood.yml)\n   - What gets registered in .vendored/config.json\n\n5. **Configuration** \u2014 the .vendored/config.json fields relevant to dogfood:\n   - vendor key naming convention (git-dogfood)\n   - protected/allowed patterns\n   - install_branch\n   - private flag and VENDOR_PAT requirement\n\n6. **Token/PAT requirements** \u2014 what consumer repos need:\n   - GITHUB_TOKEN (automatic, no setup)\n   - VENDOR_PAT (only for private vendor repos)\n   - What scopes the PAT needs\n\n7. **How it prevents infinite loops** \u2014 commit message filters\n\n## Out of scope\n\n- API reference for vendored scripts (belongs to git-vendored)\n- Pearls issue tracker docs (belongs to pearls)\n- CONTRIBUTING.md (separate issue if needed)","estimates":[{"estimator":"claude-opus-4-6","implementer":"claude-opus-4-6","cost":{"input":20000,"output":5000}}],"started_at":"2026-02-10T04:52:36Z","commit":"dea90a9","implementer":"claude-opus-4-6","cost":{"input":18000,"output":5000},"implemented_at":"2026-02-10T04:54:42Z","evaluation":{"evaluator":"claude-opus-4-6","evaluated_at":"2026-02-10T05:05:38Z","scores":{"correctness":90,"completeness":95,"quality":90,"testing":80,"documentation":95},"score":90.0},"closed_at":"2026-02-10T05:05:44Z"}
{"id":"gdf-ae89","title":"Fix dogfood.yml trigger: 'Bump & Release' not 'Release'","status":"implemented","issue_type":"task","priority":2,"created_at":"2026-02-10T06:54:19Z","estimates":[{"estimator":"claude-opus-4-6","implementer":"claude-opus-4-6","cost":{"input":15000,"output":3000}}],"started_at":"2026-02-10T06:54:40Z","commit":"3afb8a6","implementer":"claude-opus-4-6","cost":{"input":30000,"output":5000},"implemented_at":"2026-02-10T06:55:42Z"}
{"id":"gdf-744b","title":"Vendor V2 compliance for install.sh","status":"open","issue_type":"epic","priority":2,"created_at":"2026-02-12T03:20:13Z"}
{"id":"gdf-744b.1","title":"Migrate install.sh to V2 env var and install dir contract","status":"implemented","issue_type":"task","priority":2,"created_at":"2026-02-12T03:43:04Z","parent":"gdf-744b","body":"## Summary\n\nReplace positional args with V2 env vars and add install dir resolution to install.sh.\n\n## Changes\n\n- Accept `VENDOR_REF`, `VENDOR_REPO`, `VENDOR_INSTALL_DIR` env vars with positional/default fallbacks\n- Update file placement (`mkdir`, `fetch_file`, `chmod`) to use `$INSTALL_DIR`\n- Update the header comment to document V2 env vars\n- Update existing tests and add new tests for env var inputs and install dir behavior\n\n## Acceptance criteria\n\n- [ ] `install.sh` works when called with V2 env vars (`VENDOR_REF`, `VENDOR_REPO`, `VENDOR_INSTALL_DIR`)\n- [ ] `install.sh` still works with positional args (backwards compat)\n- [ ] Files are placed under `$INSTALL_DIR` (or `.dogfood/` fallback)\n- [ ] All tests pass","estimates":[{"estimator":"claude-opus-4-6","implementer":"claude-opus-4-6","cost":{"input":15000,"output":5000}}],"started_at":"2026-02-12T15:55:30Z","commit":"16d914c","implementer":"claude-opus-4-6","cost":{"input":35000,"output":8000},"implemented_at":"2026-02-12T15:57:33Z"}
{"id":"gdf-744b.2","title":"Remove V1-only artifacts from install.sh","status":"implemented","issue_type":"task","priority":2,"created_at":"2026-02-12T03:43:08Z","parent":"gdf-744b","body":"## Summary\n\nRemove V1-specific behavior that the V2 framework now handles externally.\n\n## Changes\n\n- Remove `.dogfood/.version` write (framework handles version tracking in V2)\n- Remove `.vendored/config.json` self-registration block (framework handles registration in V2)\n- Remove the `install_workflow` helper function (inline the first-install-only logic directly)\n- Remove/update tests that assert version file write and vendor registration behavior\n\n## Acceptance criteria\n\n- [ ] `.dogfood/.version` is no longer written\n- [ ] `.vendored/config.json` is not modified by install.sh\n- [ ] No dead code (`install_workflow` helper removed)\n- [ ] All tests pass","estimates":[{"estimator":"claude-opus-4-6","implementer":"claude-opus-4-6","cost":{"input":12000,"output":3000}}],"started_at":"2026-02-12T15:57:41Z","commit":"c55e3aa","implementer":"claude-opus-4-6","cost":{"input":15000,"output":5000},"implemented_at":"2026-02-12T15:58:49Z"}
{"id":"gdf-744b.3","title":"Add V2 manifest emission to install.sh","status":"implemented","issue_type":"task","priority":2,"created_at":"2026-02-12T03:43:12Z","parent":"gdf-744b","body":"## Summary\n\nTrack all installed files and write them to `$VENDOR_MANIFEST` per the V2 contract.\n\n## Changes\n\n- Track all installed files in an `INSTALLED_FILES` array\n- Write file paths to `$VENDOR_MANIFEST` when the env var is set\n- Add tests for manifest output (both when `VENDOR_MANIFEST` is set and when it's unset)\n\n## Acceptance criteria\n\n- [ ] When `VENDOR_MANIFEST` is set, all installed file paths are written to it (one per line)\n- [ ] When `VENDOR_MANIFEST` is not set, no manifest file is written\n- [ ] Manifest includes `$INSTALL_DIR/resolve` always, and `.github/workflows/dogfood.yml` only when newly installed\n- [ ] All tests pass","estimates":[{"estimator":"claude-opus-4-6","implementer":"claude-opus-4-6","cost":{"input":14000,"output":4000}}],"started_at":"2026-02-12T15:59:02Z","commit":"5cb9a4f","implementer":"claude-opus-4-6","cost":{"input":18000,"output":6000},"implemented_at":"2026-02-12T16:00:23Z"}
